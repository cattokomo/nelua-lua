##[[
  LUA_TARGET_VERSION = 54
  linklib "lua"
]]

require "hashmap"
require "lua"

local state = lua.new_state()

local test = @enum{
  A = 40,
  B,
}

state:push(test)
print(state:gettop(), lua_typename(state.L, lua_type(state.L, -1)))
lua_getfield(state.L, -1, "B")
print(state:to(@integer, -1))

state:close()
